(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[0],{146:function(n,e,t){},152:function(n,e){},154:function(n,e){},164:function(n,e){},166:function(n,e){},193:function(n,e){},194:function(n,e){},199:function(n,e){},201:function(n,e){},208:function(n,e){},227:function(n,e){},282:function(n,e,t){"use strict";t.r(e);var r=t(0),c=t(2),o=t.n(c),a=t(137),i=t.n(a),u=(t(146),t(3)),s=t(31),f=t(6),p=t(7);function b(){var n=Object(f.a)(["\n  position: absolute;\n  top: 13px;\n  left: 13px;\n  width: 24px;\n  height: 24px;\n  animation: "," 3s linear infinite;\n"]);return b=function(){return n},n}function l(){var n=Object(f.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 50px;\n  height: 50px;\n  animation: "," 2s linear infinite;\n"]);return l=function(){return n},n}function d(){var n=Object(f.a)(["\n  position: relative;\n  flex: 0 0 auto;\n  width: 50px;\n  height: 50px;\n  margin: 30px auto 0px;\n"]);return d=function(){return n},n}function j(){var n=Object(f.a)(["\n  from {\n    transform: rotate(360deg);\n  }\n\n  to {\n    transform: rotate(0deg);\n  }\n"]);return j=function(){return n},n}function x(){var n=Object(f.a)(["\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n"]);return x=function(){return n},n}var O=Object(p.b)(x()),h=Object(p.b)(j()),g=p.a.div(d()),m=p.a.img(l(),O),v=p.a.img(b(),h);function w(){return Object(r.jsxs)(g,{children:[Object(r.jsx)(m,{src:"./loader.png"}),Object(r.jsx)(v,{src:"./loader.png"})]})}var k=t(46),y=t(16),S=t.n(y);function C(){var n=Object(f.a)(["\n  margin: 30px auto 30px;\n  padding: 5px 10px;\n  border: 2px solid #50bf59;\n  border-radius: 5px;\n  background: #ececec;\n  text-align: center;\n  transition: 300ms ease-in-out;\n  &:focus {\n    border: 2px solid #409e48 !important;\n    outline: none;\n  }\n"]);return C=function(){return n},n}function F(){var n=Object(f.a)(["\n  margin: 0px auto 50px;\n  padding: 10px 50px;\n  cursor: pointer;\n  background: #50bf59;\n  color: #ececec;\n  text-transform: uppercase;\n  font-weight: 600;\n  border-radius: 10px;\n  border: none;\n  outline: none;\n  transition: 300ms ease-in-out;\n  &:hover {\n    background: #409e48;\n    color: #ffffff;\n  }\n"]);return F=function(){return n},n}function B(){var n=Object(f.a)(["\n  background: none;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  flex-flow: column;\n  position: absolute;\n  left: 0;\n  top: 0;\n"]);return B=function(){return n},n}function E(){var n=Object(f.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: #000000;\n  opacity: .5;\n"]);return E=function(){return n},n}var A=p.a.div(E()),L=p.a.div(B()),H=p.a.button(F()),D=p.a.input(C());function P(n){var e=n.setNick,t=c.useState({nick:""}),o=Object(s.a)(t,2),a=o[0],i=o[1];return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(A,{}),Object(r.jsx)(L,{children:Object(r.jsx)(dn,{children:Object(r.jsxs)(Sn,{onSubmit:function(n){n.preventDefault(),e(a.nick)},children:[Object(r.jsx)(xn,{children:"Please, choose your nickname"}),Object(r.jsx)(D,{autoFocus:!0,placeholder:"Nickname",value:a.nick,onChange:function(n){return i(Object(u.a)(Object(u.a)({},a),{},{nick:n.target.value}))}}),Object(r.jsx)(H,{type:"submit",children:"Ok"})]})})})]})}function N(){var n=Object(f.a)(["\n"]);return N=function(){return n},n}function R(){var n=Object(f.a)(["\n  flex: 0 0 auto;\n  padding: 10px 20px;\n  box-shadow: none;\n  background: #50bf59;\n  color: #ececec;\n  text-transform: uppercase;\n  margin: auto 20px;\n  border: none;\n  border-radius: 10px;\n  cursor: pointer;\n  box-shadow: 3px 3px 5px 0 #4c4c4c;\n  font-weight: 600;\n  transition: 300ms ease-in-out;\n  border: 2px solid #ececec;\n  &:hover {\n    background: #ececec;\n    color: #50bf59;\n    border: 2px solid #50bf59;\n  }\n"]);return R=function(){return n},n}function T(){var n=Object(f.a)(["\n  flex: 0 0 auto;\n  display: flex;\n  flex-flow: row;\n"]);return T=function(){return n},n}function I(){var n=Object(f.a)(["\n  flex: 1 1 auto;\n  padding: 10px 20px;\n  border: none;\n  border-radius: 5px;\n  background: #ececec;\n  transition: 300ms ease-in-out;\n  outline: none;\n  box-shadow: inset 3px 3px 5px 0 #4c4c4c;\n"]);return I=function(){return n},n}function W(){var n=Object(f.a)(["\n  flex: 0 0 70px;\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  padding-left: 20px;\n"]);return W=function(){return n},n}function z(){var n=Object(f.a)(["\n  margin-left: 20px;\n  margin-bottom: 10px;\n  border-top-left-radius: 10px;\n  border-bottom-left-radius: 10px;\n  background: #ececec;\n  flex: 1 1 auto;\n  box-shadow: inset 3px 3px 5px 0 #4c4c4c;\n  padding: 20px;\n  overflow-y: scroll;\n"]);return z=function(){return n},n}function J(){var n=Object(f.a)(["\n  display: flex;\n  flex-flow: row;\n  justify-content: space-between;\n  flex: 0 0 70px;\n"]);return J=function(){return n},n}var V,M=p.a.div(J()),U=p.a.div(z()),q=p.a.div(W()),G=p.a.input(I()),K=p.a.form(T()),Q=p.a.button(R()),X=p.a.div(N());function Y(n){var e=c.useState({chat:[],message:"",nick:void 0}),t=Object(s.a)(e,2),o=t[0],a=t[1],i=n.uuid,f=n.pass,p=function(n){return S.a.AES.encrypt(n,f).toString()};return V||(V&&(V.onerror=V.onopen=V.onclose=null,V.close()),(V=new WebSocket("ws://localhost:6969?uuid=".concat(i,"&pass=").concat(S.a.SHA512(f).toString(S.a.enc.Base64)))).onopen=function(){console.log("Connection opened!")},V.onmessage=function(n){var e=n.data;a((function(n){var t,r=Object(k.a)(n.chat);return r.push((t=e,S.a.AES.decrypt(t,f).toString(S.a.enc.Utf8))),Object(u.a)(Object(u.a)({},n),{},{chat:r})}))},V.onclose=function(){V=null}),c.useEffect((function(){var n=document.getElementById("chatView");n&&(n.scrollTop=n.scrollHeight)}),[o.chat]),Object(r.jsxs)(c.Fragment,{children:[!o.nick&&Object(r.jsx)(P,{setNick:function(n){var e="".concat(n," just entered room ..."),t=Object(k.a)(o.chat);t.push(e),a(Object(u.a)(Object(u.a)({},o),{},{nick:n,chat:t})),V.send(p(e))}}),Object(r.jsxs)(M,{children:[Object(r.jsxs)("div",{style:{flex:"1 1 100%",color:"#ffffff",display:"flex",flexFlow:"column",justifyContent:"center"},children:[Object(r.jsx)("div",{style:{flex:"0 0 auto",marginLeft:"20px",fontSize:"30px"},children:"LetterBox"}),Object(r.jsx)("div",{style:{flex:"0 0 auto",marginLeft:"20px",fontSize:"12px"},children:"End-to-end encrypted chatroom"})]}),Object(r.jsx)("img",{src:"/letter.jpg",alt:"letter",onClick:function(){return n.goHome()},style:{flex:"0 0 auto",width:"80px",height:"50px",margin:"auto 20px",cursor:"pointer"}})]}),Object(r.jsx)(U,{id:"chatView",children:o.chat.map((function(n,e){return Object(r.jsx)(X,{children:n},e)}))}),Object(r.jsx)(q,{children:Object(r.jsxs)(K,{onSubmit:function(n){n.preventDefault(),V.send(p("".concat(o.nick,": ").concat(o.message)));var e=Object(k.a)(o.chat);e.push("".concat(o.nick,": ").concat(o.message)),a(Object(u.a)(Object(u.a)({},o),{},{message:"",chat:e}))},children:[Object(r.jsx)(G,{placeholder:"Write your message here ...",value:o.message,autoFocus:o.nick,onChange:function(n){return a(Object(u.a)(Object(u.a)({},o),{},{message:n.target.value}))}}),Object(r.jsx)(Q,{typ:"submit",children:"Send"})]})})]})}var Z=t(73),$=t.n(Z);function _(){var n=Object(f.a)(["\n  flex: 0 0 auto;\n  display: flex;\n  flex-flow: column;\n"]);return _=function(){return n},n}function nn(){var n=Object(f.a)(["\n  padding: 5px 10px;\n  border: 2px solid #50bf59;\n  border-radius: 5px;\n  background: #ececec;\n  margin: 10px 20px;\n  text-align: center;\n  transition: 300ms ease-in-out;\n  &:focus {\n    border: 2px solid #409e48 !important;\n    outline: none;\n  }\n"]);return nn=function(){return n},n}function en(){var n=Object(f.a)(["\n  margin-top: 10px;\n  margin-bottom: 50px;\n  color: #50bf59;\n  text-decoration: none;\n  transition: 300ms ease-in-out;\n  text-align: center;\n  cursor: pointer;\n  &:hover {\n    color: #409e48;\n    text-decoration: underline;\n  }\n"]);return en=function(){return n},n}function tn(){var n=Object(f.a)(["\n  margin: 30px auto 50px;\n"]);return tn=function(){return n},n}function rn(){var n=Object(f.a)(["\n  margin: 30px auto 0px;\n  padding: 10px 30px;\n"]);return rn=function(){return n},n}function cn(){var n=Object(f.a)(["\n  margin: 30px auto 0px;\n  cursor: pointer;\n  background: #50bf59;\n  color: #ececec;\n  padding: 10px 20px;\n  text-transform: uppercase;\n  font-weight: 600;\n  border-radius: 10px;\n  transition: 300ms ease-in-out;\n  border: none;\n  outline: none;\n  &:hover {\n    background: #409e48;\n    color: #ffffff;\n  }\n"]);return cn=function(){return n},n}function on(){var n=Object(f.a)(["\n  margin: 10px auto 70px;\n"]);return on=function(){return n},n}function an(){var n=Object(f.a)(["\n  margin: 30px auto 30px;\n"]);return an=function(){return n},n}function un(){var n=Object(f.a)(["\n  color: #C72A2A;\n"]);return un=function(){return n},n}function sn(){var n=Object(f.a)(["\n  color: #50bf59;\n  margin: 30px auto 0;\n"]);return sn=function(){return n},n}function fn(){var n=Object(f.a)(["\n  width: 100px;\n  flex: 0 0 auto;\n  margin: 70px auto 0;\n"]);return fn=function(){return n},n}function pn(){var n=Object(f.a)(["\n  position: relative;\n  margin: auto;\n  width: 300px;\n  height: auto;\n  display: flex;\n  flex-flow: column;\n  background: #ececec;\n  text-align: center;\n  border-radius: 4px;\n  box-shadow: 4px 4px 4px 0px #1f1f1f;\n"]);return pn=function(){return n},n}function bn(){var n=Object(f.a)(["\n  background: #50bf59;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  flex-flow: column;\n  position: absolute;\n  left: 0;\n  top: 0;\n"]);return bn=function(){return n},n}var ln=p.a.div(bn()),dn=p.a.div(pn()),jn=p.a.img(fn()),xn=p.a.h2(sn()),On=Object(p.a)(xn)(un()),hn=Object(p.a)(xn)(an()),gn=Object(p.a)(xn)(on()),mn=p.a.button(cn()),vn=Object(p.a)(mn)(rn()),wn=Object(p.a)(mn)(tn()),kn=p.a.p(en()),yn=p.a.input(nn()),Sn=p.a.form(_());var Cn=function(){var n=c.useState({step:0,name:"",pass:"",uuid:void 0}),e=Object(s.a)(n,2),t=e[0],o=e[1];return 4===t.step?Object(r.jsx)(ln,{children:Object(r.jsx)(Y,{goHome:function(){return o(Object(u.a)(Object(u.a)({},t),{},{step:0,name:"",pass:"",uuid:void 0}))},uuid:t.uuid,pass:t.pass})}):Object(r.jsx)(ln,{children:Object(r.jsxs)(dn,{children:[Object(r.jsx)(jn,{src:-1===t.step?"wrong.png":"/letter2.png",alt:"letter"}),function(){switch(t.step){case 3:return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(w,{}),Object(r.jsx)(gn,{children:"Loading"})]});case 2:return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(hn,{children:"Enter existing chatroom"}),Object(r.jsxs)(Sn,{onSubmit:function(n){n.preventDefault(),o((function(n){return Object(u.a)(Object(u.a)({},n),{},{step:3})})),$.a.post("/api/enterRoom",{name:t.name,pass:S.a.SHA512(t.pass).toString(S.a.enc.Base64)}).then((function(n){console.log(n),o(Object(u.a)(Object(u.a)({},t),{},{step:4,uuid:n.data.uuid}))})).catch((function(n){console.error(n),o(Object(u.a)(Object(u.a)({},t),{},{step:-1,name:"",pass:""}))}))},children:[Object(r.jsx)(yn,{placeholder:"Room name",value:t.name,autoFocus:!0,onChange:function(n){return o(Object(u.a)(Object(u.a)({},t),{},{name:n.target.value}))}}),Object(r.jsx)(yn,{placeholder:"Password",type:"password",value:t.pass,onChange:function(n){return o(Object(u.a)(Object(u.a)({},t),{},{pass:n.target.value}))}}),Object(r.jsx)(vn,{type:"submit",children:"Enter"}),Object(r.jsx)(kn,{onClick:function(){return o(Object(u.a)(Object(u.a)({},t),{},{step:1,pass:"",name:""}))},children:"or create new chatroom"})]})]});case 1:return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(hn,{children:"Set name and password for your new chatroom"}),Object(r.jsxs)(Sn,{onSubmit:function(n){n.preventDefault(),o((function(n){return Object(u.a)(Object(u.a)({},n),{},{step:3})})),$.a.post("/api/createRoom",{name:t.name,pass:S.a.SHA512(t.pass).toString(S.a.enc.Base64)}).then((function(n){o(Object(u.a)(Object(u.a)({},t),{},{step:4,uuid:n.data.uuid}))})).catch((function(n){console.error(n),o(Object(u.a)(Object(u.a)({},t),{},{step:-1,name:"",pass:""}))}))},children:[Object(r.jsx)(yn,{placeholder:"Room name",value:t.name,autoFocus:!0,onChange:function(n){return o(Object(u.a)(Object(u.a)({},t),{},{name:n.target.value}))}}),Object(r.jsx)(yn,{placeholder:"Password",type:"password",value:t.pass,onChange:function(n){return o(Object(u.a)(Object(u.a)({},t),{},{pass:n.target.value}))}}),Object(r.jsx)(vn,{type:"submit",children:"Create"}),Object(r.jsx)(kn,{onClick:function(){return o(Object(u.a)(Object(u.a)({},t),{},{step:2,pass:"",name:""}))},children:"or enter existing room"})]})]});case-1:return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(On,{children:"Sorry, but entered values are not valid"}),Object(r.jsx)(wn,{onClick:function(){return o(Object(u.a)(Object(u.a)({},t),{},{step:0}))},children:"Sad But True"})]});default:return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(xn,{children:"Welcome to LetterBox"}),Object(r.jsx)(mn,{onClick:function(){return o(Object(u.a)(Object(u.a)({},t),{},{step:1}))},children:"New encrypted chatroom"}),Object(r.jsx)(kn,{onClick:function(){return o(Object(u.a)(Object(u.a)({},t),{},{step:2}))},children:"or enter existing room"})]})}}()]})})},Fn=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,284)).then((function(e){var t=e.getCLS,r=e.getFID,c=e.getFCP,o=e.getLCP,a=e.getTTFB;t(n),r(n),c(n),o(n),a(n)}))};i.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(Cn,{})}),document.getElementById("root")),Fn()}},[[282,1,2]]]);
//# sourceMappingURL=main.aeefcade.chunk.js.map